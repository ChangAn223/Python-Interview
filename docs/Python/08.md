## Python编程范式

### 1.面向对象编程
面向对象编程是指把事物抽象成一个个类，其中包含成员（属性）和操作（方法）。程序中不再是一个个函数，而是通过类创建实例（也就是对象），在程序中调用这些实例的方法。

#### 1.面向对象三大特征

面向对象三大特征：封装、继承、多态

**封装：**

通过对象隐藏程序的具体实现细节，将数据与操作包装在一起，对象与对象之间通过方法调用实现交换信息。具体的说就是通过类的方法操作数据成员。

**继承：**

类之间可以继承，通过继承得到的类称为子类，被继承的类为父类，子类相对于父类一般更加具体化，子类可以继承父类的所有代码。子类继承父类，可以实现代码复用。

**多态：**

不同类型的对象上的相同的操作或函数、过程可以获得不同的结果。不同的对象，收到同一消息可以产生不同的结果，这种现象称为多态性。比如子类重写父类的方法，父类子类的这个方法名相同，但被调用时可以返回不同的结构。

**Ps：**在使用类时：组合与继承的选择 --> 在使用组合与继承都能达到目的时，优先使用组合，这样可以保持代码简单。

#### 2.Python类中三种方法

**类方法：**类的方法，可以不实例化直接通过类名调用，类的实例也可以调用。使用"@classmethod"装饰。被装饰的方法的形参为cls表示类本身。

**实例方法：**是类实例化后才能调用的方法，其形参为self表示实例化出来的对象本身。

**静态方法：**是一个任意的函数，不过写在了类里，与类没有什么关系，没有cls或self这种形参。用"@staticmethod"装饰，可通过类名直接调用也可以通过实例化后的对象调用。


### 2.元类

元类（Metaclass）即创建类的类。在Python源码中有这样一个类：
```python
class type(object):
    """
    type(object_or_name, bases, dict)
    type(object) -> the object's type
    type(name, bases, dict) -> a new type
    """
```
他是用来创建类的，它的类初始化方法__init__(cls, what, bases=None, dict=None)接受四个参数。
参数cls：表示接收type类本身作为参数
参数what：创建类的名字
参数bases：是一个元组，表示我们创建出来的这个类继承于那些类
参数dict：是一个字典，表示创建的这个类的属性和方法

如下，我们可以这样来定义一个类：
```python
# 一般定义类的方式：
a = 123

class ClassA(object):
    pass

def function():
    pass

# 通过元类定义类
MyBaseClass = type('MyClass', (ClassA,), {"a": a, "func": function})

# 创建类：
MyClassA = MyBaseClass()
```

#### 自定义元类

元类的主要目的就是为了当创建类时能够自动地改变类。

第一步：继承type
第二步：重写__new__方法实现自己的逻辑
第三步：有需要还可以重写__init__方法

```python
class Metaclass(type):
    def __new__(cls, name, bases, dict):
        attrs = ((name, value) for name, value in dict.items() if not name.startswith('__'))
        uppercase_attr = dict((name.upper(), value) for name, value in attrs)
        return super(Metaclass, cls).__new__(cls, name, bases, uppercase_attr)
```
**使用自定义元类：**

在用 class 语句自定义类时，默认 metaclass 是 type，我们也可以指定 metaclass 来创建类。 由于 python3 和 python2 在指定类的 metaclass 语法不兼容，下面分别示例 python2 和 python3 两个版本。


```python

# python2 版本：

class Bar(object):
    __metaclass__ = MetaClass

    def __init__(self, name):
        self.name = name

    def print_name(self):
        print(self.name)

# python3 版本：

class Bar(object, metaclass=MetaClass):
    def __init__(self, name):
        self.name = name

    def print_name(self):
        print(self.name)

```

### 3.装饰器

装饰器入门：
https://blog.51cto.com/13885935/2162154

类装饰器：
重写类的__call__方法


### 4.函数式编程

函数式编程就是一种抽象程度很高的编程范式，纯粹的函数式编程语言编写的函数没有变量，因此，任意一个函数，只要输入是确定的，输出就是确定的，这种纯函数我们称之为没有副作用。
而允许使用变量的程序设计语言，由于函数内部的变量状态不确定，同样的输入，可能得到不同的输出，因此，这种函数是有副作用的。
函数式编程的一个特点就是，允许把函数本身作为参数传入另一个函数，还允许返回一个函数！

Python对函数式编程提供部分支持。由于Python允许使用变量，因此，Python不是纯函数式编程语言。Python支持部分函数式编程特性：高阶函数map,reduce,filter

#### 1.高阶函数

map接受一个函数和一个可迭代对象，将可迭代对象的每个元素传入函数得到计算结果，最终返回一个包含这些结果的列表。
reduce同样接受一个函数和一个可迭代对象，将可迭代对象的元素依次传入函数，得到的结果在与后一个元素一起传入函数，最终返回一个结果。
filter同样接受一个函数和一个可迭代对象，将可迭代对象的每个元素传入函数，如果这个函数的计算结果为True则返回该元素，为False则不返回。是个过滤器。

#### 2.闭包

在一个函数中再定义一个函数，再函数里的函数叫内部函数，若内部函数使用了函数外的变量，则称他为闭包，即绑定了外部作用域的变量的函数。
即是离开外部作用域，若闭包任然可见，则绑定变量不会被销毁。每次运行外部函数会重新创建闭包。